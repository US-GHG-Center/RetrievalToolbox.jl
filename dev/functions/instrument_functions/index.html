<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Instrument Functions · RetrievalToolbox.jl</title><meta name="title" content="Instrument Functions · RetrievalToolbox.jl"/><meta property="og:title" content="Instrument Functions · RetrievalToolbox.jl"/><meta property="twitter:title" content="Instrument Functions · RetrievalToolbox.jl"/><meta name="description" content="Documentation for RetrievalToolbox.jl."/><meta property="og:description" content="Documentation for RetrievalToolbox.jl."/><meta property="twitter:description" content="Documentation for RetrievalToolbox.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">RetrievalToolbox.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Main</a></li><li><span class="tocitem">Concepts</span><ul><li><a class="tocitem" href="../../concepts/fundamentals/">Fundamentals</a></li><li><a class="tocitem" href="../../concepts/core_concepts/">Core Concepts</a></li><li><a class="tocitem" href="../../concepts/radiance/">Radiance</a></li><li><a class="tocitem" href="../../concepts/phasefunction/">Scattering Phasefunction</a></li></ul></li><li><a class="tocitem" href="../../design/design/">Design</a></li><li><span class="tocitem">Functions</span><ul><li><a class="tocitem" href="../state_vector_functions/">State Vector Functions</a></li><li><a class="tocitem" href="../atmosphere_functions/">Atmosphere Functions</a></li><li class="is-active"><a class="tocitem" href>Instrument Functions</a><ul class="internal"><li><a class="tocitem" href="#List-of-instrument-functions"><span>List of instrument functions</span></a></li></ul></li></ul></li><li><span class="tocitem">Types</span><ul><li><a class="tocitem" href="../../types/atmosphere_types/">Atmosphere Types</a></li><li><a class="tocitem" href="../../types/buffer_types/">Buffer Types</a></li><li><a class="tocitem" href="../../types/dispersion_types/">Dispersion Types</a></li><li><a class="tocitem" href="../../types/RT_types/">Radiative Transfer Method Types</a></li><li><a class="tocitem" href="../../types/state_vector_types/">State Vector Types</a></li><li><a class="tocitem" href="../../types/surface_types/">Surface Types</a></li></ul></li><li><span class="tocitem">Working with Julia</span><ul><li><a class="tocitem" href="../../julia/develop/">Develop</a></li><li><a class="tocitem" href="../../julia/dicts/">Dictionaries</a></li><li><a class="tocitem" href="../../julia/units/">Units</a></li></ul></li><li><span class="tocitem">Pitfalls</span><ul><li><a class="tocitem" href="../../pitfalls/pitfalls/">Pitfalls</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Functions</a></li><li class="is-active"><a href>Instrument Functions</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Instrument Functions</a></li></ul></nav><div class="docs-right"><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Instrument-functions"><a class="docs-heading-anchor" href="#Instrument-functions">Instrument functions</a><a id="Instrument-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Instrument-functions" title="Permalink"></a></h1><p>RetrievalToolbox is mostly instrument-agnostic, meaning that none of the functions are written for specific instruments, even though a certain type of instrument class is assumed for the time being.</p><p>Nevertheless, in order to create a fully functioning retrieval algorithm, the forward model must be capable of producing instrument-level radiances. The functions listed below provide ways of doing so, assuming the high-resolution radiances and Jacobians have been calculated already.</p><p>Note that some of the functions below may refer to quantities whose meaning should be understood in detail, for further reading consult <a href="../../concepts/core_concepts/#core_concepts">Core Algorithm Concepts</a>, especially the section on <em>Pixels, Spectral Samples and Dispersion</em>.</p><h2 id="List-of-instrument-functions"><a class="docs-heading-anchor" href="#List-of-instrument-functions">List of instrument functions</a><a id="List-of-instrument-functions-1"></a><a class="docs-heading-anchor-permalink" href="#List-of-instrument-functions" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="RetrievalToolbox.apply_isrf_to_spectrum!-Tuple{InstrumentBuffer, GaussISRF, AbstractDispersion, AbstractVector, AbstractSpectralWindow}"><a class="docstring-binding" href="#RetrievalToolbox.apply_isrf_to_spectrum!-Tuple{InstrumentBuffer, GaussISRF, AbstractDispersion, AbstractVector, AbstractSpectralWindow}"><code>RetrievalToolbox.apply_isrf_to_spectrum!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">apply_isrf_to_spectrum!(
    inst_buf::InstrumentBuffer,
    ISRF::GaussISRF,
    disp::AbstractDispersion,
    data::AbstractVector,
    swin::AbstractSpectralWindow;
    doppler_factor,
    extend
) -&gt; Bool
</code></pre><p>Applies the <code>GaussISRF</code>-type instrument response function on some vector <code>data</code>, usually intended to be the high-resolution model radiance or Jacobian. Integration limits are given by the <code>extend</code> keyword, it defines how many <span>$\sigma$</span> (derived fom <code>ISRF.FWHM</code>) the integration limits are on both sides. The output is stored in <code>inst_buf.low_res_output</code>. Returns <code>true</code> if the calculation did not encounter any errors.</p><p><strong>Details</strong></p><p>Application of the ISRF is in accordance with standard literature. The radiance <span>$I[s]$</span> at instrument-level on a particular spectral sample <span>$s$</span> at wavelength <span>$\lambda_s$</span> is given by</p><p><span>$I[s] = \int I_\mathrm{model}(\lambda_s - \Delta\lambda) \cdot \mathrm{ISRF}(\Delta\lambda) \; d\lambda$</span></p><p>where <span>$\mathrm{ISRF}$</span> is the Gaussian ISRF evaluated at the relative wavelength <span>$\Delta\lambda$</span>. This implementation replaces the integral by a fast numerical integration.</p><p><strong>Instrument Doppler shift</strong></p><p>This function can take the <code>doppler_factor</code> argument, which is needed to compute the appropriate Doppler shift caused by the relative motion between, for example, the measurement footprint on the ground (for downlooking instruments) and the instrument along the line of sight. The Doppler factor is <span>$v / c$</span> where <span>$c$</span> is the speed of light. This function does not derive the appropriate Doppler shift, it is up to users to perform the appropriate calculation.</p></div></section></details></article><article><details class="docstring" open="true"><summary id="RetrievalToolbox.apply_isrf_to_spectrum!-Tuple{InstrumentBuffer, TableISRF, AbstractDispersion, AbstractVector, AbstractSpectralWindow}"><a class="docstring-binding" href="#RetrievalToolbox.apply_isrf_to_spectrum!-Tuple{InstrumentBuffer, TableISRF, AbstractDispersion, AbstractVector, AbstractSpectralWindow}"><code>RetrievalToolbox.apply_isrf_to_spectrum!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">apply_isrf_to_spectrum!(
    inst_buf::InstrumentBuffer,
    ISRF::TableISRF,
    disp::AbstractDispersion,
    data::AbstractVector,
    spectral_window::AbstractSpectralWindow;
    doppler_factor
) -&gt; Bool
</code></pre><p>Applies the <code>TableISRF</code>-type instrument response function on some vector <code>data</code>, usually intended to be the high-resolution model radiance or Jacobian. The output is stored in <code>inst_buf.low_res_output</code>. Returns <code>true</code> if the calculation did not encounter any errors.</p><p><strong>Details</strong></p><p>Application of the ISRF is in accordance with standard literature. The radiance <span>$I[s]$</span> at instrument-level on a particular spectral sample <span>$s$</span> at wavelength <span>$\lambda_s$</span> is given by</p><p><span>$I[s] = \int I_\mathrm{model}(\lambda_s - \Delta\lambda) \cdot \mathrm{ISRF}_s(\Delta\lambda) \; d\lambda$</span></p><p>where <span>$\mathrm{ISRF}_s$</span> is the pre-calculated ISRF (of sample <span>$s$</span>) evaluated at the relative wavelength <span>$\Delta\lambda$</span>. This implementation replaces the integral by a fast numerical integration via the trapezoid rule.</p><p>The output is stored in <code>inst_buf.low_res_output</code>.</p><p><strong>Instrument Doppler shift</strong></p><p>This function can take the <code>doppler_factor</code> argument, which is needed to compute the appropriate Doppler shift caused by the relative motion between, for example, the measurement footprint on the ground (for downlooking instruments) and the instrument along the line of sight. The Doppler factor is <span>$v / c$</span> where <span>$c$</span> is the speed of light. This function does not derive the appropriate Doppler shift, it is up to users to perform the appropriate calculation.</p></div></section></details></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../atmosphere_functions/">« Atmosphere Functions</a><a class="docs-footer-nextpage" href="../../types/atmosphere_types/">Atmosphere Types »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Thursday 8 January 2026 17:04">Thursday 8 January 2026</span>. Using Julia version 1.12.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
